# Story 2.2: Exercise Library - UI

## Status: Draft

## Story
**As a** user,
**I want** to browse, search, and add exercises to my library,
**so that** I can build my workout programs with the exercises I use.

## Acceptance Criteria
1. Page `/exercises` listant tous les exercices disponibles
2. Filtres par groupe musculaire (tabs ou dropdown multi-sÃ©lection)
3. Barre de recherche par nom
4. Affichage en cards ou liste avec nom et badges groupes musculaires
5. Bouton "Ajouter un exercice" ouvrant un formulaire modal/drawer
6. Formulaire : nom (requis), groupes musculaires (requis, multi-sÃ©lection avec chips)
7. Badge visuel distinguant exercices personnalisÃ©s vs bibliothÃ¨que de base
8. Actions edit/delete sur les exercices personnalisÃ©s uniquement
9. Navigation accessible depuis le menu principal

## Tasks / Subtasks
- [ ] CrÃ©er page liste exercices (AC: 1)
  - [ ] CrÃ©er `app/(app)/exercises/page.tsx`
  - [ ] Fetch exercices avec React Query
  - [ ] Layout avec header et liste
- [ ] ImplÃ©menter filtres (AC: 2)
  - [ ] CrÃ©er composant MuscleGroupFilter
  - [ ] Tabs ou dropdown multi-select
  - [ ] Synchroniser avec query params URL
  - [ ] Appeler API avec filtre
- [ ] ImplÃ©menter recherche (AC: 3)
  - [ ] Input de recherche avec debounce
  - [ ] Filtrer cÃ´tÃ© client ou ajouter query param search
  - [ ] Clear button
- [ ] CrÃ©er composant ExerciseCard (AC: 4)
  - [ ] Afficher nom de l'exercice
  - [ ] Badges pour chaque groupe musculaire (couleurs diffÃ©rentes)
  - [ ] Layout compact pour liste mobile
- [ ] CrÃ©er modal/drawer ajout (AC: 5, 6)
  - [ ] Bouton "+" ou "Ajouter un exercice"
  - [ ] Drawer ou Dialog Shadcn
  - [ ] Formulaire React Hook Form
  - [ ] Input nom
  - [ ] Multi-select groupes musculaires avec chips
  - [ ] Validation Zod
  - [ ] Submit â†’ POST /exercises
- [ ] Badge custom vs systÃ¨me (AC: 7)
  - [ ] Badge "Custom" sur exercices personnalisÃ©s
  - [ ] Style diffÃ©rent (couleur accent)
- [ ] Actions edit/delete (AC: 8)
  - [ ] Menu contextuel (3 dots) sur exercices custom
  - [ ] Edit â†’ ouvrir formulaire prÃ©-rempli
  - [ ] Delete â†’ Dialog confirmation
  - [ ] Masquer actions sur exercices systÃ¨me
- [ ] Navigation (AC: 9)
  - [ ] Ajouter dans navigation secondaire ou menu
  - [ ] Accessible depuis Workout Builder aussi

## Dev Notes

### Page Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Exercises              + Add   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” [Search...              ]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [All][Pecs][Dos][Bras][Jambes] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ DÃ©veloppÃ© couchÃ©        â”‚   â”‚
â”‚  â”‚ ğŸ’ª pecs Â· triceps Â· Ã©paulesâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Curl biceps    [Custom] â”‚   â”‚
â”‚  â”‚ ğŸ’ª biceps         â‹®     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Tractions               â”‚   â”‚
â”‚  â”‚ ğŸ’ª dos Â· biceps          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Muscle Group Badges
```typescript
const muscleGroupColors: Record<MuscleGroup, string> = {
  pecs: 'bg-red-500/20 text-red-400',
  dos: 'bg-blue-500/20 text-blue-400',
  epaules: 'bg-yellow-500/20 text-yellow-400',
  biceps: 'bg-green-500/20 text-green-400',
  triceps: 'bg-purple-500/20 text-purple-400',
  quadriceps: 'bg-orange-500/20 text-orange-400',
  ischios: 'bg-pink-500/20 text-pink-400',
  fessiers: 'bg-indigo-500/20 text-indigo-400',
  abdos: 'bg-cyan-500/20 text-cyan-400',
  mollets: 'bg-teal-500/20 text-teal-400',
  trapezes: 'bg-lime-500/20 text-lime-400',
  lombaires: 'bg-amber-500/20 text-amber-400',
};
```

### Multi-Select Component
Utiliser un composant custom ou adapter Shadcn Select :
```tsx
<MultiSelect
  options={MUSCLE_GROUPS.map(mg => ({ value: mg, label: mg }))}
  selected={selectedGroups}
  onChange={setSelectedGroups}
  placeholder="SÃ©lectionner groupes musculaires"
/>
```

### React Query Hooks
```typescript
// hooks/useExercises.ts
export function useExercises(filters?: { muscleGroup?: string; isCustom?: boolean }) {
  return useQuery({
    queryKey: ['exercises', filters],
    queryFn: () => api.get('/exercises', { params: filters }),
  });
}

export function useCreateExercise() {
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: (data: CreateExerciseInput) => api.post('/exercises', data),
    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['exercises'] }),
  });
}
```

### Components Shadcn Ã  installer
- Input (search)
- Badge
- Button
- Dialog ou Drawer
- DropdownMenu (actions)
- Tabs (filtres)
- Command (pour multi-select)

### Zod Schema Frontend
```typescript
const exerciseFormSchema = z.object({
  name: z.string().min(2, 'Le nom doit faire au moins 2 caractÃ¨res'),
  muscleGroups: z.array(z.string()).min(1, 'SÃ©lectionnez au moins un groupe'),
});
```

## Testing
- VÃ©rifier que la liste affiche exercices systÃ¨me + custom
- Tester filtre par groupe musculaire
- Tester recherche par nom
- Tester crÃ©ation d'un exercice custom
- Tester modification d'un exercice custom
- Tester suppression avec confirmation
- VÃ©rifier que les actions sont masquÃ©es sur exercices systÃ¨me

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | PO Sarah |
