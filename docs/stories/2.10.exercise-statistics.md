# Story 2.10: Exercise Statistics & Progress Charts

## Status: Ready for Dev

## Story
**As a** user,
**I want** to see progress charts and key stats for each exercise I've practiced,
**so that** I can visualize my strength and volume evolution over time and stay motivated.

## Context

L'application permet d√©j√† de voir l'√©volution des mensurations via des graphiques (page `profile/measurements/graphs`). Cette story ajoute une page similaire d√©di√©e aux exercices, en r√©utilisant le m√™me pattern UI (s√©lecteur en chips, graphique ligne, s√©lecteur de p√©riode, carte de tendance).

Les m√©triques retenues apr√®s consultation aupr√®s de pratiquants :
- **E1RM (Force estim√©e)** : `poids √ó (1 + reps/30)` ‚Äî capte les micro-progressions m√™me quand le poids max stagne
- **Volume total** : `Œ£(poids √ó reps)` par s√©ance ‚Äî mesure le travail global, pertinent pour l'hypertrophie

La fr√©quence n'est pas restitu√©e comme courbe (les points du graphique la montrent naturellement) mais comme information textuelle r√©sum√©e.

### R√©f√©rence UI : Page mensurations (graphiques)

La page `profile/measurements/graphs` utilise :
- **Chips en grille 3 colonnes** pour s√©lectionner une mensuration ‚Üí ici, s√©lectionner un exercice
- **Carte graphique** avec `LineChart` (Recharts), `ChartContainer`, `ChartTooltip`
- **S√©lecteur de p√©riode** : 1m, 3m, 6m, 1an, Tout (composants `Button` variant ghost/secondary)
- **TrendCard** : affiche premi√®re valeur ‚Üí derni√®re valeur, delta absolu et %, ic√¥ne tendance

On r√©utilise exactement ces composants et patterns.

## Acceptance Criteria

### AC1 ‚Äî Acc√®s aux statistiques d'exercices
1. Dans le header de la page `/exercises`, un bouton ic√¥ne (BarChart3 ou TrendingUp) navigue vers `/exercises/stats`
2. La page `/exercises/stats` affiche le titre "√âvolution" avec bouton retour (m√™me pattern que la page mensurations/graphs)

### AC2 ‚Äî Filtre par groupe musculaire
3. Au-dessus de la grille d'exercices, afficher une barre de filtres par groupe musculaire (scroll horizontal), identique √† celle de la page `/exercises` :
   - Chips : "Abdos", "Biceps", "Dos", "√âpaules", "Fessiers", "Jambes", "Mollets", "Pectoraux", "Triceps", etc.
   - Seuls les groupes musculaires des exercices pratiqu√©s sont affich√©s
   - Par d√©faut aucun filtre actif ‚Üí tous les exercices pratiqu√©s sont list√©s
   - Un filtre actif r√©duit la grille aux exercices de ce groupe musculaire
   - R√©utiliser le m√™me composant/pattern de filtres que la page `/exercises`
4. Optionnel : une barre de recherche au-dessus des filtres (identique √† `/exercises`) si le nombre d'exercices reste important

### AC3 ‚Äî S√©lecteur d'exercice (chips)
5. Afficher en grille (3 colonnes max, responsive 2 colonnes sur petit √©cran) les exercices pratiqu√©s, filtr√©s par le groupe musculaire s√©lectionn√© (ou tous si aucun filtre)
6. Les exercices sont tri√©s par ordre alphab√©tique
7. L'exercice s√©lectionn√© utilise `variant="default"` (fond plein), les autres `variant="outline"`
8. Le premier exercice de la liste filtr√©e est s√©lectionn√© par d√©faut au chargement
9. Quand on change de filtre musculaire, le premier exercice du r√©sultat filtr√© est automatiquement s√©lectionn√©

### AC4 ‚Äî Toggle de m√©trique
10. Sous le s√©lecteur d'exercice, deux boutons toggle : **"Force (E1RM)"** et **"Volume"**
11. Le toggle s√©lectionn√© utilise `variant="secondary"`, l'autre `variant="ghost"`
12. Le graphique et la carte tendance se mettent √† jour au changement de m√©trique

### AC5 ‚Äî Graphique de progression
13. Carte graphique avec :
    - **Titre** : nom de l'exercice s√©lectionn√©
    - **Unit√©** : "kg" pour E1RM, "kg" pour Volume
    - **LineChart** (Recharts) avec la m√™me config que les mensurations :
      - Ligne couleur `accent-orange`
      - Points visibles sur la courbe
      - Grille CartesianGrid en pointill√©s
      - XAxis : dates format√©es (ex: "28 avr.", "16 juin")
      - YAxis : valeurs avec calcul automatique du domaine
14. Chaque point repr√©sente une s√©ance o√π l'exercice a √©t√© fait :
    - **E1RM** : le meilleur E1RM parmi toutes les s√©ries de cette s√©ance (`max(poids √ó (1 + reps/30))`)
    - **Volume** : la somme `Œ£(actualWeight √ó actualReps)` sur toutes les s√©ries compl√©t√©es de cette s√©ance
15. Si une seule donn√©e, afficher un point unique (pas de ligne)
16. Si aucune donn√©e sur la p√©riode, afficher un message "Aucune donn√©e sur cette p√©riode"

### AC6 ‚Äî S√©lecteur de p√©riode
17. Rang√©e de boutons sous le graphique : **1m**, **3m**, **6m**, **1an**, **Tout**
18. M√™me pattern que les mensurations : `Button size="sm"`, s√©lectionn√© = `variant="secondary"`, non s√©lectionn√© = `variant="ghost"`
19. P√©riode par d√©faut : **Tout**
20. Le changement de p√©riode filtre les donn√©es du graphique, de la carte tendance et des infos r√©sum√©es

### AC7 ‚Äî Carte de tendance (TrendCard)
21. Sous le s√©lecteur de p√©riode, une carte affichant :
    - Premi√®re valeur ‚Üí **Derni√®re valeur** (en gras) + unit√©
    - Delta absolu et pourcentage avec ic√¥ne tendance (TrendingUp vert / TrendingDown rouge / Minus gris)
    - M√™me composant `TrendCard` que les mensurations
22. Les valeurs correspondent √† la m√©trique s√©lectionn√©e (E1RM ou Volume) sur la p√©riode s√©lectionn√©e

### AC8 ‚Äî Informations r√©sum√©es de l'exercice
23. Sous la carte tendance, une section d'informations contextuelles :
    - **Fr√©quence** : "X fois (Yx/mois)" sur la p√©riode s√©lectionn√©e
      - X = nombre total de s√©ances avec cet exercice sur la p√©riode
      - Y = moyenne par mois arrondie √† 1 d√©cimale (ex: "3.2x/mois")
    - **Poids max sur la p√©riode** : "Poids max : Xkg (sur Y reps le DD/MM/YYYY)"
      - X = la charge la plus lourde effectivement soulev√©e (parmi `actualWeight`)
      - Y = le nombre de reps r√©alis√©es sur cette s√©rie
      - Date de la s√©ance correspondante
24. Si la p√©riode ne contient qu'une s√©ance, la fr√©quence affiche "1 fois"

## UX Specifications

### Wireframe ‚Äî Page √âvolution Exercices

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚Üê √âvolution                                        ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  üîç Rechercher un exercice...               ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  [Biceps] [Dos] [√âpaules] [Pectoraux] [Triceps] ‚Üí ‚îÇ
‚îÇ       ‚Üë scroll horizontal, filtres groupes musc.    ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ  ‚îÇD√©v.couch√©‚îÇ ‚îÇD√©v.couch√©‚îÇ ‚îÇD√©v.inclin√©‚îÇ           ‚îÇ
‚îÇ  ‚îÇ  barre   ‚îÇ ‚îÇ halt√®res ‚îÇ ‚îÇ  barre   ‚îÇ           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                      ‚îÇ
‚îÇ  ‚îÇ  Dips    ‚îÇ  ‚Üê filtr√© sur "Pectoraux"            ‚îÇ
‚îÇ  ‚îÇ          ‚îÇ                                      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                      ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ  ‚îÇ Force (E1RM) ‚óè  ‚îÇ ‚îÇ   Volume  ‚óã     ‚îÇ           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  D√©velopp√© couch√© barre                  kg ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                             ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   108 ‚î§                          ‚óè          ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   105 ‚î§                ‚óè    ‚óè               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   102 ‚î§      ‚óè    ‚óè                         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ    99 ‚î§ ‚óè                                   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ       ‚îî‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ        Nov  D√©c  Jan  F√©v  Mar              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                             ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   1m    3m    6m    1an   [Tout]            ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  99.0 ‚Üí 108.0 kg    ‚Üó +9.0 (+9.1%)         ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  üìÖ 39 fois (3.2x/mois)                     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  üèãÔ∏è Poids max : 90kg (sur 6 reps le 29/01)  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Comportement du toggle m√©trique

| M√©trique | Valeur par point | Unit√© | Description tooltip |
|----------|-----------------|-------|---------------------|
| Force (E1RM) | `max(poids √ó (1 + reps/30))` parmi les s√©ries | kg | "Force estim√©e (E1RM)" |
| Volume | `Œ£(poids √ó reps)` toutes s√©ries | kg | "Volume total" |

### Calcul E1RM ‚Äî Formule d'Epley

```
E1RM = poids √ó (1 + reps / 30)
```

Pour chaque s√©ance, on prend le **meilleur E1RM** parmi toutes les s√©ries compl√©t√©es de l'exercice :
```
e1rm_seance = max(serie.actualWeight √ó (1 + serie.actualReps / 30)) pour chaque s√©rie
```

### Calcul Volume total

```
volume_seance = Œ£(serie.actualWeight √ó serie.actualReps) pour chaque s√©rie compl√©t√©e
```

S√©ries sans `actualWeight` ou `actualReps` (null) sont exclues du calcul.

## Technical Notes

### Donn√©es n√©cessaires ‚Äî Nouvel endpoint API

**GET `/exercises/stats`** ‚Äî Donn√©es de tous les exercices pratiqu√©s par l'utilisateur

Retourne la liste des exercices avec les donn√©es de s√©ances pour le graphique.

```typescript
interface ExerciseStatsResponse {
  exercises: PracticedExercise[];
}

interface PracticedExercise {
  exerciseId: string;
  exerciseName: string;
  /** Donn√©es par s√©ance, tri√©es par date croissante */
  sessions: ExerciseSessionData[];
}

interface ExerciseSessionData {
  sessionId: string;
  completedAt: string; // ISO date
  /** Meilleur E1RM parmi les s√©ries : max(weight √ó (1 + reps/30)) */
  bestE1RM: number;
  /** Volume total : Œ£(weight √ó reps) */
  totalVolume: number;
  /** Poids max soulev√© dans cette s√©ance pour cet exercice */
  maxWeight: number;
  /** Reps r√©alis√©es sur la s√©rie au poids max */
  repsAtMaxWeight: number;
}
```

### Calculs c√¥t√© API

Les calculs se font c√¥t√© API (pas frontend) pour :
- √âviter de transf√©rer toutes les s√©ries brutes au client
- Centraliser la logique de calcul
- Permettre de cacher/optimiser plus tard

**Query Prisma** : Joindre `WorkoutSession` ‚Üí `SessionExercise` ‚Üí `SessionSet` filtr√© par :
- `session.userId` = utilisateur courant
- `session.status` = `completed`
- `sessionExercise.status` = `completed` (exclure skipped/substituted)
- `sessionSet.actualReps IS NOT NULL AND sessionSet.actualWeight IS NOT NULL`

### Calculs c√¥t√© Frontend

√Ä partir des donn√©es `ExerciseSessionData[]` retourn√©es par l'API :

1. **Filtrage par p√©riode** : filtrer `sessions` par `completedAt` selon la p√©riode s√©lectionn√©e
2. **Donn√©es graphique** : mapper `sessions` ‚Üí points `{ date, value }` selon la m√©trique (bestE1RM ou totalVolume)
3. **TrendCard** : premier point et dernier point de la p√©riode ‚Üí delta et %
4. **Fr√©quence** : `count = sessions.length`, `moisPeriode = dur√©e p√©riode en mois`, `freq = count / moisPeriode`
5. **Poids max** : chercher dans les sessions filtr√©es celle avec le `maxWeight` le plus √©lev√©

### Composants √† r√©utiliser depuis les mensurations

| Composant mensurations | R√©utilisation exercices |
|------------------------|------------------------|
| Grille chips `Button` (3 cols) | Identique, avec noms d'exercices au lieu de mensurations |
| `LineChart` + `ChartContainer` + `ChartTooltip` | Identique, m√™me config couleur accent-orange |
| S√©lecteur p√©riode (boutons 1m/3m/6m/1an/Tout) | Identique |
| `TrendCard` | Identique |

### Composants nouveaux

| Composant | Description |
|-----------|-------------|
| Toggle m√©trique (Force/Volume) | Rang√©e de 2 boutons, pattern similaire au s√©lecteur de p√©riode |
| Section infos r√©sum√©es | Carte avec fr√©quence + poids max, styling coh√©rent avec TrendCard |

### Structure fichiers

```
apps/web/src/app/(app)/exercises/stats/
  page.tsx                    # Page principale "√âvolution" exercices

apps/api/src/routes/
  exercise.routes.ts          # Ajouter GET /exercises/stats

apps/web/src/lib/api/
  exercises.ts                # Ajouter fonction getExerciseStats()
```

### D√©pendances

- Recharts (d√©j√† install√©, utilis√© par mensurations)
- date-fns (d√©j√† install√©)
- Composants UI existants : Button, Card (shadcn)
- Composant chart existant : `components/ui/chart.tsx`
- Donn√©es de sessions compl√©t√©es (stories pr√©c√©dentes)

## Risks & Mitigations

| Risque | Impact | Mitigation |
|--------|--------|------------|
| Performance si l'utilisateur a beaucoup de s√©ances | Lenteur API | Agr√©gation en une seule query Prisma optimis√©e, pas de N+1 |
| Exercices au poids de corps (pas de weight) | Donn√©es manquantes | Exclure les s√©ries sans actualWeight du calcul, afficher "Aucune donn√©e" si aucune s√©rie √©ligible |
| Formule E1RM peu pr√©cise √† tr√®s hautes reps (>15) | Valeur trompeuse | Acceptable pour le MVP, la formule d'Epley est standard |
| Beaucoup d'exercices pratiqu√©s ‚Üí grille longue | UX surcharg√©e | Filtres par groupe musculaire + recherche inclus dans le scope |

## Out of Scope (v2+)

- Historique d√©taill√© des s√©ances par exercice (liste scrollable s√©rie par s√©rie)
- Comparaison entre deux exercices
- PR badges / notifications de records
- Tri des exercices (par progression, fr√©quence, etc.)
- Export des donn√©es
- Ligne de tendance (r√©gression lin√©aire)
- Points cliquables vers le d√©tail de la s√©ance

---

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-01 | 0.1 | Initial draft | Dev |
| 2026-02-04 | 0.2 | Refined: m√©triques E1RM + Volume, pattern mensurations, feedback terrain | PM |
| 2026-02-04 | 0.3 | Ajout filtres groupe musculaire + recherche, statut Ready for Dev | PM |
