# Story 1.8: Measurements Graphs View

## Status: Approved

## Story
**As a** user,
**I want** to visualize my body measurements evolution over time with graphs,
**so that** I can better understand my physical progress and trends.

## Acceptance Criteria
1. Page `/profile/measurements/graphs` accessible depuis l'icÃ´ne graphique dans la page mensurations
2. SÃ©lecteur de mesure (poids, tour de taille, biceps, etc.) avec dropdown ou tabs
3. Graphique linÃ©aire affichant l'Ã©volution de la mesure sÃ©lectionnÃ©e dans le temps
4. PÃ©riode de temps configurable (1 mois, 3 mois, 6 mois, 1 an, tout)
5. Affichage des points de donnÃ©es avec date et valeur au survol/tap
6. Pour les mesures bilatÃ©rales (biceps, cuisses, etc.), afficher les deux courbes (G/D) superposÃ©es
7. Indicateurs de tendance : progression globale (%, valeur absolue)
8. Design responsive et cohÃ©rent avec le thÃ¨me sombre de l'application

## Tasks / Subtasks
- [ ] Installer librairie de graphiques (AC: 3)
  - [ ] Ã‰valuer options : Recharts, Chart.js, Tremor
  - [ ] Installer la librairie choisie
  - [ ] Configurer le thÃ¨me sombre
- [ ] CrÃ©er page graphs (AC: 1, 2)
  - [ ] CrÃ©er `app/(app)/profile/measurements/graphs/page.tsx`
  - [ ] Header avec bouton retour
  - [ ] SÃ©lecteur de mesure (dropdown ou tabs)
  - [ ] Liste des mesures disponibles groupÃ©es par zone
- [ ] ImplÃ©menter graphique linÃ©aire (AC: 3, 5)
  - [ ] Composant LineChart rÃ©utilisable
  - [ ] Axes X (dates) et Y (valeurs)
  - [ ] Tooltip au survol/tap avec date et valeur
  - [ ] Points de donnÃ©es visibles
  - [ ] Couleur accent orange pour la courbe
- [ ] Filtrage par pÃ©riode (AC: 4)
  - [ ] Boutons/tabs pour sÃ©lectionner la pÃ©riode
  - [ ] Filtrer les donnÃ©es cÃ´tÃ© client
  - [ ] Mettre Ã  jour le graphique dynamiquement
- [ ] Mesures bilatÃ©rales (AC: 6)
  - [ ] DÃ©tecter si mesure bilatÃ©rale (biceps, avant-bras, cuisse, mollet, cheville, poignet)
  - [ ] Afficher 2 courbes : Gauche et Droite
  - [ ] LÃ©gende pour diffÃ©rencier les courbes
  - [ ] Couleurs distinctes (ex: orange pour G, bleu pour D)
- [ ] Indicateurs de tendance (AC: 7)
  - [ ] Calculer variation sur la pÃ©riode sÃ©lectionnÃ©e
  - [ ] Afficher : valeur initiale â†’ valeur finale
  - [ ] Afficher : changement absolu et pourcentage
  - [ ] Couleur verte si progression positive, rouge si nÃ©gative
- [ ] Design et responsive (AC: 8)
  - [ ] Adapter le graphique Ã  la largeur de l'Ã©cran
  - [ ] Touch-friendly sur mobile
  - [ ] CohÃ©rence avec le thÃ¨me zinc/orange

## Dev Notes

### Librairie recommandÃ©e : Recharts
Recharts est recommandÃ© car :
- BasÃ© sur React, composants dÃ©claratifs
- Bonne documentation
- Responsive par dÃ©faut
- Facile Ã  thÃ©matiser

```bash
npm install recharts
```

### Structure des donnÃ©es pour le graphique
```typescript
interface ChartDataPoint {
  date: string;        // Format YYYY-MM-DD
  value: number;       // Valeur de la mesure
  valueLeft?: number;  // Pour mesures bilatÃ©rales
  valueRight?: number; // Pour mesures bilatÃ©rales
}

// Exemple pour poids
const weightData: ChartDataPoint[] = [
  { date: "2024-04-28", value: 75.0 },
  { date: "2024-06-16", value: 76.0 },
];

// Exemple pour biceps (bilatÃ©ral)
const bicepsData: ChartDataPoint[] = [
  { date: "2024-04-28", valueLeft: 31.0, valueRight: 32.5 },
  { date: "2024-06-16", valueLeft: 31.5, valueRight: 32.5 },
];
```

### Mesures disponibles
```typescript
const measurements = {
  general: [
    { key: "weight", label: "Poids", unit: "kg" },
  ],
  upperBody: [
    { key: "neck", label: "Cou", unit: "cm" },
    { key: "shoulders", label: "Ã‰paules", unit: "cm" },
    { key: "chest", label: "Poitrine", unit: "cm" },
  ],
  arms: [
    { key: "biceps", label: "Biceps", unit: "cm", bilateral: true },
    { key: "forearm", label: "Avant-bras", unit: "cm", bilateral: true },
    { key: "wrist", label: "Poignet", unit: "cm", bilateral: true },
  ],
  core: [
    { key: "waist", label: "Taille", unit: "cm" },
    { key: "hips", label: "Hanches", unit: "cm" },
  ],
  legs: [
    { key: "thigh", label: "Cuisse", unit: "cm", bilateral: true },
    { key: "calf", label: "Mollet", unit: "cm", bilateral: true },
    { key: "ankle", label: "Cheville", unit: "cm", bilateral: true },
  ],
};
```

### PÃ©riodes de temps
```typescript
const periods = [
  { key: "1m", label: "1 mois", days: 30 },
  { key: "3m", label: "3 mois", days: 90 },
  { key: "6m", label: "6 mois", days: 180 },
  { key: "1y", label: "1 an", days: 365 },
  { key: "all", label: "Tout", days: Infinity },
];
```

### Layout de la page
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Ã‰volution                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Poids â–¼]                      â”‚  â† SÃ©lecteur de mesure
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [1m] [3m] [6m] [1an] [Tout]    â”‚  â† Filtres pÃ©riode
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚         ğŸ“ˆ Graphique            â”‚
â”‚                                 â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚    /                    \       â”‚
â”‚   /                      \      â”‚
â”‚  â€¢                        â€¢     â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  75.0 kg â†’ 76.0 kg              â”‚
â”‚  +1.0 kg (+1.3%)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Testing
- Tester affichage du graphique avec donnÃ©es existantes
- Tester sÃ©lection de diffÃ©rentes mesures
- Tester changement de pÃ©riode
- Tester mesures bilatÃ©rales (2 courbes)
- Tester avec une seule mesure (pas de courbe, juste un point)
- Tester sans aucune donnÃ©e pour une mesure (Ã©tat vide)
- Tester responsive sur mobile

## Dependencies
- Story 1.6: Measurements Tracking (doit Ãªtre complÃ©tÃ©e)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-18 | 0.1 | Initial story creation | Dev |
