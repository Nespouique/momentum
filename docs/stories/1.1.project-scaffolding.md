# Story 1.1: Project Scaffolding & Monorepo Setup

## Status: Ready for Review

## Story
**As a** developer,
**I want** a properly structured monorepo with Next.js frontend and Express backend,
**so that** I have a solid foundation to build upon with shared TypeScript types.

## Acceptance Criteria
1. Monorepo structure créée avec dossiers `apps/web`, `apps/api`, `packages/shared`
2. Next.js 14+ configuré avec App Router et TypeScript strict
3. Express.js configuré avec TypeScript strict
4. Package `shared` configuré pour types partagés entre frontend et backend
5. Scripts `dev`, `build`, `lint` fonctionnels à la racine
6. ESLint + Prettier configurés avec règles cohérentes
7. `.gitignore` approprié et README basique

## Tasks / Subtasks
- [x] Initialiser le monorepo avec npm workspaces (AC: 1)
  - [x] Créer `package.json` racine avec workspaces config
  - [x] Créer structure de dossiers `apps/web`, `apps/api`, `packages/shared`
- [x] Setup Next.js frontend (AC: 2)
  - [x] `npx create-next-app@latest apps/web` avec App Router, TypeScript
  - [x] Configurer `tsconfig.json` avec strict mode
  - [x] Vérifier que le dev server démarre
- [x] Setup Express backend (AC: 3)
  - [x] Initialiser `apps/api` avec package.json
  - [x] Installer express, typescript, ts-node-dev, @types/*
  - [x] Créer `tsconfig.json` strict
  - [x] Créer `src/index.ts` avec serveur Express basique (port 3001)
- [x] Setup shared package (AC: 4)
  - [x] Créer `packages/shared/package.json`
  - [x] Créer `packages/shared/src/types/index.ts`
  - [x] Configurer build TypeScript
  - [x] Ajouter comme dépendance dans web et api
- [x] Configurer scripts racine (AC: 5)
  - [x] Script `dev` pour lancer web + api en parallèle
  - [x] Script `build` pour build tous les packages
  - [x] Script `lint` pour linter tous les packages
- [x] Setup ESLint + Prettier (AC: 6)
  - [x] Installer eslint, prettier, et plugins
  - [x] Créer `.eslintrc.js` avec règles TypeScript
  - [x] Créer `.prettierrc`
  - [x] Ajouter scripts lint et format
- [x] Finaliser configuration (AC: 7)
  - [x] Créer `.gitignore` complet
  - [x] Créer README.md avec instructions de setup

## Dev Notes

### Monorepo Strategy
- **npm workspaces** choisi pour simplicité (single-developer project)
- Pas besoin de Turborepo/Nx pour ce projet

### Structure cible
```
momentum/
├── apps/
│   ├── web/          # Next.js 14+ frontend
│   └── api/          # Express.js backend
├── packages/
│   └── shared/       # Types partagés
├── package.json      # Workspaces root
├── tsconfig.base.json
└── .eslintrc.js
```

### Versions technos
- Node.js: 20 LTS
- Next.js: 14.x+
- Express: 4.x
- TypeScript: 5.x

### TypeScript Config
- `strict: true` obligatoire
- Pas de `any` autorisé
- Path aliases: `@shared/*` pour le package shared

### Ports
- Frontend (Next.js): 3000
- Backend (Express): 3001

## Testing
- Pour cette story: vérifier que `npm run dev` démarre les deux serveurs
- Vérifier que le type sharing fonctionne (importer un type de shared dans web et api)
- Vérifier que `npm run lint` et `npm run build` passent sans erreur

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-17 | 0.1 | Initial story creation | PO Sarah |
| 2026-01-18 | 1.0 | Implementation completed | Dev James |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5

### Debug Log References
- None

### Completion Notes
- Monorepo structure créée avec npm workspaces
- Next.js 14.2.35 configuré avec App Router, TypeScript strict, Tailwind CSS
- Express.js 4.x configuré avec TypeScript strict, helmet, cors
- Package shared configuré avec types partagés (User, ApiResponse, HealthCheckResponse)
- Type sharing vérifié: API utilise `HealthCheckResponse` de @momentum/shared
- Scripts `dev`, `build`, `lint`, `format` fonctionnels
- ESLint 8.x + Prettier 3.x configurés avec règles TypeScript
- `concurrently` utilisé pour lancer API + Web en parallèle
- Build et lint passent sans erreur

### File List
| File | Status |
|------|--------|
| package.json | Created |
| tsconfig.base.json | Created |
| .eslintrc.js | Created |
| .prettierrc | Created |
| .prettierignore | Created |
| .gitignore | Created |
| README.md | Created |
| apps/web/package.json | Created |
| apps/web/tsconfig.json | Created |
| apps/web/next.config.mjs | Created |
| apps/web/tailwind.config.ts | Created |
| apps/web/postcss.config.mjs | Created |
| apps/web/next-env.d.ts | Created |
| apps/web/src/app/globals.css | Created |
| apps/web/src/app/layout.tsx | Created |
| apps/web/src/app/page.tsx | Created |
| apps/api/package.json | Created |
| apps/api/tsconfig.json | Created |
| apps/api/src/index.ts | Created |
| packages/shared/package.json | Created |
| packages/shared/tsconfig.json | Created |
| packages/shared/src/index.ts | Created |
| packages/shared/src/types/index.ts | Created |
